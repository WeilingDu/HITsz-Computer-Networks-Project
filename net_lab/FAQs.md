# 常见问题

## 自测CMake调试方法

CMake版本需不低于3.7.1。
如配置后无显示，使用*cmake --version*命令查看版本是否过低。如过低自行升级CMake

1. 首次运行需点击*Configure*按钮配置工程
2. 右键点击相应的测试，如*ctest_arp*
3. 在右键菜单里点击*Debug*调试，或点击*Run In Terminal*在终端中运行

## 自测wireshark调试方法

*./test*的相应自测目录下有两个*pcap*文件 其中*demo*是标准样例包 另一个是自己协议栈发送的包 可用wireshark打开对比 利用其强大的分析功能很容易定位错误。

## wireshark校验和

wireshark看着一切正常但是自测就是不过，或者UDP调试工具就是收不到大概率是校验和写错了，wireshark默认不校验所有协议的校验和。
如何打开wireshark的校验和功能自行百度。

## 填包

很多同学没有使用头文件里提供的数据包结构体 直接像写汇编一样操作字节流了 这种方法编写效率低 容易出错 可读性差，建议将字节数组转为相应的结构体指针后使用结构体语法进行操作，正常的网络编程也都是这么做的

## 检包

收到包之后包头的每个字段都要检查是否有误 如ip版本是否是ipv4 不能只看chksum

## 设计文档

文档里设计思路会纳入评分（虽然不多） 设计思路也是证明实验是独立完成的重要依据 有分数追求的大佬（juanwang）们不要只放代码和指导书的截图。

## UDP实验段错误

大概率没sudo。

## UDP实验IP

udp实验 必须确保虚拟机linux系统的ip和自己协议栈config.h的ip**不一样** 否则我们可能会给你零分 因为没人能确认到底是你自己的协议栈在工作还是系统协议栈在工作

## 收到包长度变长

以太网最小传输单元46字节，小于则网卡自动填充到46。再加上14字节以太网头部，共60字节。

## udp奇数字节校验和

checksum16函数本来就应该能够处理奇数字节，没必要真的去填充0，但是测试用例并没有奇数的 所以写不写都可。

## 拷贝buf

两个buf之间拷贝需要使用*buf_copy*函数，不能直接memcpy。具体原因可自己思考。

## 段错误怎么调试，结构体怎么操作，函数指针是什么？？？

可以去旁听大一C语言课程找答案。
